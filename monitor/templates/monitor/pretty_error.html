{% extends 'monitor/pretty_base.html' %}

{% block title %}–û—à–∏–±–∫–∞ - AI Monitor{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto text-center py-12">
    <div class="bg-white rounded-xl shadow-sm border p-8">
        <div class="text-6xl mb-4">üòï</div>
        <h1 class="text-2xl font-bold text-gray-800 mb-4">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞</h1>

        <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
                <i class="fas fa-exclamation-circle text-red-500 mr-3"></i>
                <div class="text-left">
                    <h3 class="font-semibold text-red-800">–û—à–∏–±–∫–∞:</h3>
                    <p class="text-red-700 mt-1">{{ error|default:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞" }}</p>
                </div>
            </div>
        </div>

        <div class="space-y-4">
            <p class="text-gray-600">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:</p>

            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button onclick="location.reload()"
                        class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors">
                    <i class="fas fa-sync-alt mr-2"></i>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                </button>

                <a href="/"
                   class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-colors inline-block">
                    <i class="fas fa-home mr-2"></i>–ù–∞ –≥–ª–∞–≤–Ω—É—é
                </a>

                {% if not connected %}
                <button onclick="connectServer()"
                        class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors">
                    <i class="fas fa-plug mr-2"></i>–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
                </button>
                {% endif %}
            </div>
        </div>

        <!-- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏) -->
        <details class="mt-6 text-left">
            <summary class="cursor-pointer text-gray-600 hover:text-gray-800">
                <i class="fas fa-bug mr-2"></i>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            </summary>
            <div class="mt-2 p-3 bg-gray-100 rounded text-sm font-mono overflow-auto">
                <div><strong>URL:</strong> {{ request.path }}</div>
                <div><strong>SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:</strong> {{ connected|yesno:"–ü–æ–¥–∫–ª—é—á–µ–Ω,–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω" }}</div>
                <div><strong>–í—Ä–µ–º—è:</strong> {% now "H:i:s" %}</div>
            </div>
        </details>
    </div>
</div>

<script>
function connectServer() {
    fetch('/api/connect/simple/', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'connected') {
                location.reload();
            } else {
                alert('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' + data.message);
            }
        })
        .catch(error => {
            alert('–û—à–∏–±–∫–∞: ' + error);
        });
}
</script>
{% endblock %}