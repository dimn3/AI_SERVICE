{% extends 'monitor/pretty_base.html' %}

{% block title %}–°—Ç–∞—Ç—É—Å AI –ê–≥–µ–Ω—Ç–∞ - AI Monitor{% endblock %}

{% block content %}
<div class="mb-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-2">ü§ñ –°—Ç–∞—Ç—É—Å AI –ê–≥–µ–Ω—Ç–∞</h2>
    <p class="text-gray-600">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö AI —Å–∏—Å—Ç–µ–º—ã</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
    <!-- –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è -->
    <div class="bg-white rounded-lg shadow-sm border p-6">
        <h3 class="text-lg font-semibold mb-4">üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è</h3>
        <div class="space-y-3">
            <div class="flex justify-between items-center">
                <span class="text-gray-600">SSH –°–µ—Ä–≤–µ—Ä:</span>
                <span class="flex items-center {% if connected %}text-green-600{% else %}text-red-600{% endif %}">
                    <i class="fas fa-circle text-xs mr-2"></i>
                    {% if connected %}–ü–æ–¥–∫–ª—é—á–µ–Ω{% else %}–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω{% endif %}
                </span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-gray-600">AI –ê–≥–µ–Ω—Ç:</span>
                <span class="flex items-center {% if ai_connected %}text-green-600{% else %}text-red-600{% endif %}">
                    <i class="fas fa-circle text-xs mr-2"></i>
                    {% if ai_connected %}–ê–∫—Ç–∏–≤–µ–Ω{% else %}–ù–µ–∞–∫—Ç–∏–≤–µ–Ω{% endif %}
                </span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-gray-600">OpenAI:</span>
                <span class="flex items-center {% if openai_available %}text-green-600{% else %}text-red-600{% endif %}">
                    <i class="fas fa-circle text-xs mr-2"></i>
                    {% if openai_available %}–î–æ—Å—Ç—É–ø–µ–Ω{% else %}–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω{% endif %}
                </span>
            </div>
        </div>
    </div>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏ -->
    <div class="bg-white rounded-lg shadow-sm border p-6">
        <h3 class="text-lg font-semibold mb-4">üß† AI –ú–æ–¥–µ–ª—å</h3>
        <div class="space-y-3">
            <div class="flex justify-between">
                <span class="text-gray-600">–ú–æ–¥–µ–ª—å:</span>
                <span class="font-semibold">{{ model }}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-600">–ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π:</span>
                <span class="font-semibold">{{ history_count }}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-600">–°—Ç–∞—Ç—É—Å:</span>
                <span class="font-semibold {% if openai_available %}text-green-600{% else %}text-yellow-600{% endif %}">
                    {% if openai_available %}‚úÖ –ì–æ—Ç–æ–≤{% else %}‚ö†Ô∏è –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º{% endif %}
                </span>
            </div>
        </div>
    </div>
</div>

<!-- –î–µ–π—Å—Ç–≤–∏—è -->
<div class="bg-white rounded-lg shadow-sm border p-6">
    <h3 class="text-lg font-semibold mb-4">‚ö° –î–µ–π—Å—Ç–≤–∏—è</h3>
    <div class="flex flex-wrap gap-4">
        <a href="/ai-chat/" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
            <i class="fas fa-robot mr-2"></i>–ß–∞—Ç —Å AI
        </a>
        <a href="/pretty/ai/history/" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">
            <i class="fas fa-history mr-2"></i>–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
        </a>
        <a href="/pretty/ai/docker/" class="bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors">
            <i class="fab fa-docker mr-2"></i>–ê–Ω–∞–ª–∏–∑ Docker
        </a>
        <button onclick="clearHistory()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
            <i class="fas fa-trash mr-2"></i>–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
        </button>
    </div>
</div>

<script>
function clearHistory() {
    if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤?')) {
        fetch('/api/ai/clear-history/', { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    location.reload();
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + data.error);
                }
            });
    }
}
</script>
{% endblock %}